"use strict";(self.webpackChunksoundtab_frontend=self.webpackChunksoundtab_frontend||[]).push([[87],{7087:(j,f,l)=>{l.r(f),l.d(f,{BandModule:()=>$});var B=l(6019),s=l(7537),c=l(7218),t=l(2383),d=l(6504),g=l(5612),h=l(5542),A=l(4522);let u=(()=>{class i{constructor(e,n){this._globalService=e,this._http=n,this.url=this._globalService.apiUrl+"/band"}getAll(){let e=this._globalService.headersBuilder(!0);return this._http.get(`${this.url}`,e)}get(e){let n=this._globalService.headersBuilder(!0);return this._http.get(`${this.url}/id/${e}`,n)}delete(e){let n=this._globalService.headersBuilder(!0);return this._http.delete(`${this.url}/admin/id/${e}`,n)}update(e){let n=new FormData;for(let a in e)n.append(a,e[a]);let o=this._globalService.headersBuilder(!0,n,!0);return this._http.put(`${this.url}/admin`,n,o).pipe((0,g.X)(0))}create(e){let n=new FormData;for(let a in e)n.append(a,e[a]);let o=this._globalService.headersBuilder(!0,n,!0);return this._http.post(`${this.url}/admin`,n,o).pipe((0,g.X)(0))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(h.U),t.LFG(A.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var b=l(7043),v=l(2088),p=l(481),m=l(4750);function S(i,r){if(1&i&&(t.TgZ(0,"div",10),t.TgZ(1,"span",11),t._uU(2),t.qZA(),t.qZA()),2&i){const e=r.$implicit;t.xp6(2),t.hij(" ",e.name," ")}}let Z=(()=>{class i{constructor(e,n,o){this._ref=e,this._config=n,this._bandService=o,this.form=new s.cw({id:new s.NI(null),title:new s.NI("",s.kI.required),description:new s.NI(""),file:new s.NI}),this.loading=!1}ngOnInit(){this._config.data&&this.form.patchValue(this._config.data)}ngOnDestroy(){this.loading=!1}uploadFile(e){this.form.patchValue({file:e.files[0]})}deleteFile(e){this.form.patchValue({file:null}),this.inputUpload&&(this.inputUpload.uploadedFileCount=0)}onSubmit(){this.loading=!0,this.form.valid&&(this.form.value.id?this._bandService.update(this.form.value).subscribe(e=>{this._ref.close(e.data)}):this._bandService.create(this.form.value).subscribe(e=>{this._ref.close(e.data)}))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.E7),t.Y36(d.S),t.Y36(u))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-form"]],viewQuery:function(e,n){if(1&e&&t.Gf(c.p,5),2&e){let o;t.iGM(o=t.CRH())&&(n.inputUpload=o.first)}},decls:17,vars:9,consts:[[1,"flex","flex-column",3,"formGroup","ngSubmit"],[1,"p-fluid","my-1"],[1,"p-field","mb-2"],["for","title"],["formControlName","title","pInputText","","placeholder","Ej: Oasis"],["for","message"],["formControlName","description","pInputTextarea","","placeholder","Banda fundad por Liam Gallagher y..."],["name","file","uploadLabel","Subir archivos","chooseLabel","Seleccionar archivo","cancelLabel","Cancelar","styleClass","theme",3,"customUpload","multiple","fileLimit","showUploadButton","onSelect","onRemove","onClear"],["pTemplate","file"],["pButton","","type","submit",1,"p-button-primary","align-self-end",3,"disabled","icon","iconPos","label"],[1,"p-d-flex","p-align-center"],[1,"p-ml-3"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"label",3),t._uU(4," Nombre de la banda "),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",2),t.TgZ(7,"label",5),t._uU(8," Descripci\xf3n de la banda "),t.qZA(),t.TgZ(9,"textarea",6),t._uU(10,"            "),t.qZA(),t.qZA(),t.TgZ(11,"div",2),t.TgZ(12,"label",5),t._uU(13," Imagen de la banda "),t.qZA(),t.TgZ(14,"p-fileUpload",7),t.NdJ("onSelect",function(a){return n.uploadFile(a)})("onRemove",function(a){return n.deleteFile(a)})("onClear",function(a){return n.deleteFile(a)}),t.YNc(15,S,3,1,"ng-template",8),t.qZA(),t.qZA(),t.qZA(),t._UZ(16,"button",9),t.qZA()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(14),t.Q6J("customUpload",!0)("multiple",!1)("fileLimit",1)("showUploadButton",!1),t.xp6(2),t.Q6J("disabled",!n.form.valid||n.loading)("icon","pi "+(n.loading?"pi-spin pi-spinner":"pi-check"))("iconPos","right")("label",n.loading?n.form.value.id?"Editando banda...":"Agregando banda...":n.form.value.id?"Editar banda":"Agregar banda"))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,b.o,v.g,c.p,p.jx,m.Hq],styles:["textarea[_ngcontent-%COMP%]{min-height:120px}"]}),i})();var _=l(5506),T=l(6651),C=l(7962),F=l(6551);function U(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"h1"),t._uU(2," Lista de bandas "),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().addBand()}),t._UZ(4,"i",11),t._uU(5," Nueva banda "),t.qZA(),t.qZA()}}function y(i,r){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Imagen"),t.qZA(),t.TgZ(3,"th",12),t._uU(4,"Banda"),t.qZA(),t.TgZ(5,"th",13),t._uU(6,"Descripci\xf3n"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Acci\xf3n"),t.qZA(),t.qZA())}const x=function(i){return["..","album",i]};function L(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._UZ(2,"img",14),t.ALo(3,"imageSrc"),t.qZA(),t.TgZ(4,"td",12),t._uU(5),t.qZA(),t.TgZ(6,"td",13),t._uU(7),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"div",15),t._UZ(10,"button",16),t.TgZ(11,"button",17),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().editBand(a)}),t.qZA(),t.TgZ(12,"button",18),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().deleteBand(a)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=r.$implicit;t.xp6(2),t.Q6J("src",t.lcZ(3,4,e.file_url),t.LSH),t.xp6(3),t.Oqu(e.title),t.xp6(2),t.Oqu(e.description),t.xp6(3),t.Q6J("routerLink",t.VKq(6,x,e.id))}}const q=function(){return["title","description"]};let N=(()=>{class i{constructor(e,n,o,a){this.globalService=e,this._bandService=n,this._dialogService=o,this._confirmationService=a,this.bands=[],this.loading=!1}ngOnInit(){this.getBands()}getBands(){this.loading=!0,this._bandService.getAll().subscribe(e=>{200==e.status&&(this.bands=e.data,this.loading=!1)})}editBand(e){this._dialogService.open(Z,{header:"Editar banda",data:e}).onClose.subscribe(o=>{o&&(this.bands=this.bands.map(a=>a.id==e.id?o:a))})}deleteBand(e){this._confirmationService.confirm({message:"\xbfEst\xe1 seguro que desea eliminar la banda?",rejectButtonStyleClass:"p-button-outline",accept:()=>{this._bandService.delete(e.id).subscribe(n=>{200==n.status&&(this.bands=this.bands.filter(o=>o.id!=e.id))})}})}addBand(){this._dialogService.open(Z,{header:"Nueva banda",data:{}}).onClose.subscribe(n=>{n&&(this.bands=[...this.bands,n])})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.U),t.Y36(u),t.Y36(d.xA),t.Y36(p.YP))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-band-list"]],decls:9,vars:6,consts:[[1,"container"],[1,"my-5","flex","justify-content-end"],["pButton","","type","button","label","Cerrar sesi\xf3n","icon","pi pi-power-off",1,"align-self-end",3,"click"],[3,"globalFilterFields","value","rows","paginator","loading"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Confirmaci\xf3n","icon","pi pi-exclamation-triangle"],[1,"flex","justify-content-between","align-items-center"],["pButton","",3,"click"],[1,"pi","pi-plus"],[2,"width","15%"],[2,"width","65%"],[1,"table-img",3,"src"],[1,"inline-flex","justify-content-between"],["pButton","","type","button","icon","pi pi-list",1,"p-button-primary","mr-2",3,"routerLink"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-info","mr-2",3,"click"],["pButton","","type","button","icon","pi pi-trash",1,"p-button-danger",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return n.globalService.logout()}),t.qZA(),t.qZA(),t.TgZ(3,"p-table",3,4),t.YNc(5,U,6,0,"ng-template",5),t.YNc(6,y,9,0,"ng-template",6),t.YNc(7,L,13,8,"ng-template",7),t.qZA(),t.qZA(),t._UZ(8,"p-confirmDialog",8)),2&e&&(t.xp6(3),t.Q6J("globalFilterFields",t.DdM(5,q))("value",n.bands)("rows",10)("paginator",!0)("loading",n.loading))},directives:[m.Hq,_.iA,p.jx,T.Q,C.rH],pipes:[F.U],styles:[""]}),i})();var J=l(3350);const Y=[{path:"",component:N}];let $=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[u,d.xA,p.YP],imports:[[B.ez,_.U$,m.hJ,b.j,v.A,s.u5,s.UX,T.D,C.Bz.forChild(Y),d.DL,J.F,c.O]]}),i})()}}]);